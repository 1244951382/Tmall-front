{"ast":null,"code":"export default {\n  name: 'itemDetailPage',\n  data() {\n    return {\n      itemId: \"\",\n      itemDetail: {},\n      itemParams: {},\n      itemList: [],\n      pageNum: 1,\n      pageSize: 6\n    };\n  },\n  created() {\n    this.itemId = this.$route.query.itemId;\n    this.getItemById();\n    this.getItemsParamById();\n    this.getOtherItems();\n  },\n  methods: {\n    //当用户单击按钮时，滚动到文档顶部\n    topFunction() {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    // 将数据库查询操作封装\n    getItemById() {\n      this.request.get(\"/items/\" + this.itemId).then(res => {\n        this.itemDetail = res.data;\n      });\n    },\n    getItemsParamById() {\n      this.request.get(\"/items-param/itemParams\", {\n        params: {\n          itemId: this.itemId\n        }\n      }).then(res => {\n        this.itemParams = res.data;\n      });\n    },\n    getOtherItems() {\n      this.request.get(\"/items/page\", {\n        params: {\n          pageNum: this.pageNum,\n          pageSize: this.pageSize\n        }\n      }).then(res => {\n        if (res.data.total >= 1) {\n          this.itemList = res.data.records;\n        } else if (res.data.total == 0) {\n          this.$message(\"没有找到噢！\");\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    changeItemId(id) {\n      // this.itemId = id;\n      // this.getItemById();\n      // this.getItemsParamById();\n      this.$router.replace({\n        path: \"/detail\",\n        query: {\n          itemId: id\n        }\n      });\n      this.$router.go(0);\n    },\n    handleSizeChange(val) {\n      this.pageSize = val;\n      this.load();\n    },\n    handleCurrentChange(val) {\n      this.pageNum = val;\n      this.load();\n    },\n    handlePageChangePrev() {\n      this.pageNum--;\n      console.log(this.pageNum);\n      this.load();\n    },\n    handlePageChangeNext() {\n      this.pageNum++;\n      console.log(this.pageNum);\n      this.load();\n    }\n  }\n};\n\n// 当用户从文档顶部向下滚动20px时，显示按钮\nwindow.onscroll = function () {\n  scrollFunction();\n};\n\n//滚动一定距离显示按钮\nfunction scrollFunction() {\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n    document.getElementById(\"movetop\").style.display = \"block\";\n  } else {\n    document.getElementById(\"movetop\").style.display = \"none\";\n  }\n}","map":{"version":3,"mappings":"AAmHA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;IACAC;MACAC;MACAA;IACA;IACA;IACAC;MACA,0CACAC;QACA;MACA;IACA;IACAC;MACA;QACAC;UACAb;QACA;MACA;QACA;MACA;IACA;IACAc;MACA;QACAD;UACAT;UACAC;QACA;MACA;QACA;UACA;QACA;UACA;QACA;MACA;QACAU;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAC;QACAC;UACAlB;QACA;MACA;MACA;IACA;IACAmB;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACAN;MACA;IACA;IACAO;MACA;MACAP;MACA;IACA;EACA;AACA;;AAEA;AACAQ;EACAC;AACA;;AAEA;AACA;EACA;IACAf;EACA;IACAA;EACA;AACA","names":["name","data","itemId","itemDetail","itemParams","itemList","pageNum","pageSize","created","methods","topFunction","document","getItemById","then","getItemsParamById","params","getOtherItems","console","changeItemId","path","query","handleSizeChange","handleCurrentChange","handlePageChangePrev","handlePageChangeNext","window","scrollFunction"],"sourceRoot":"src/views","sources":["itemDetailPage.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--header-->\r\n\t\t<header id=\"site-header\" class=\"fixed-top\">\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<nav class=\"navbar navbar-expand-lg stroke p-0\">\r\n\t\t\t\t\t<!-- logo -->\r\n\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t<a class=\"navbar-brand\" href=\"/home\">\r\n\t\t\t\t\t\t\t<img src=\"../assets/images/logo.png\" alt=\"logo\" title=\"logo\" style=\"height:45px;\" /> Tmall\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t<div class=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\r\n\t\t\t\t\t\t<ul class=\"navbar-nav ml-lg-5 mr-lg-auto\">\r\n\t\t\t\t\t\t\t<li class=\"nav-item @@home__active\">\r\n\t\t\t\t\t\t\t\t<a class=\"nav-link\" href=\"/home\">Home <span class=\"sr-only\">(current)</span></a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"nav-item active\">\r\n\t\t\t\t\t\t\t\t<a class=\"nav-link\" href=\"/about\">About</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</nav>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t\t<!--/header-->\r\n\r\n\t\t<!-- 商品详情展示 -->\r\n\t\t<div class=\"item-detail-box\">\r\n\t\t\t<el-page-header class=\"page-header\" @back=\"$router.back(-1)\" content=\"商品详情\">\r\n\t\t\t</el-page-header>\r\n\t\t\t<el-container class=\"detail-box\">\r\n\t\t\t\t<el-header>\r\n\t\t\t\t\t<h1>{{itemDetail.itemName}}</h1>\r\n\t\t\t\t</el-header>\r\n\t\t\t\t<el-container class=\"detail-describe-box\">\r\n\t\t\t\t\t<el-aside class=\"detail-image-box\">\r\n\t\t\t\t\t\t<el-image :src=\"itemDetail.itemImgUrl\" style=\"height: 300px; display: flex;\"></el-image>\r\n\t\t\t\t\t</el-aside>\r\n\t\t\t\t\t<el-container>\r\n\t\t\t\t\t\t<el-main>\r\n\t\t\t\t\t\t\t<h4>产地：{{itemParams.producPlace}}</h4>\r\n\t\t\t\t\t\t\t<h4>保质期：{{itemParams.footPeriod}}</h4>\r\n\t\t\t\t\t\t\t<h4>包装方式：{{itemParams.packagingMethod}}</h4>\r\n\t\t\t\t\t\t\t<h4>重量：{{itemParams.weight}}</h4>\r\n\t\t\t\t\t\t\t<h4>保存方法：{{itemParams.storageMethod}}</h4>\r\n\t\t\t\t\t\t\t<h4>食用方法：{{itemParams.eatMethod}}</h4>\r\n\t\t\t\t\t\t</el-main>\r\n\t\t\t\t\t</el-container>\r\n\t\t\t\t</el-container>\r\n\t\t\t\t<el-footer class=\"other-items-box\">\r\n\t\t\t\t\t<h6>其他推荐：</h6>\r\n\t\t\t\t\t<div class=\"other-items\">\r\n\t\t\t\t\t\t<ul class=\"other-ul\">\r\n\t\t\t\t\t\t\t<li class=\"other-item\" v-for=\"item in itemList\" :key=\"item.id\">\r\n\t\t\t\t\t\t\t\t<a @click=\"changeItemId(item.id)\">\r\n\t\t\t\t\t\t\t\t\t<!-- 商品图片 -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"other-item-ph\">\r\n\t\t\t\t\t\t\t\t\t\t<img :src=\"item.itemImgUrl\" width=\"115px\" height=\"115px\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<!-- 商品名字 -->\r\n\t\t\t\t\t\t\t\t\t<div class=\"other-item-title\">{{item.itemName}}</div>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</el-footer>\r\n\t\t\t</el-container>\r\n\t\t</div>\r\n\r\n\r\n\t\t<!-- //商品详情展示 -->\r\n\r\n\t\t<!-- footer -->\r\n\t\t<footer class=\"py-5\">\r\n\t\t\t<div class=\"container pt-md-5\">\r\n\t\t\t\t<div class=\"footer-logo mb-lg-5 mb-4 text-center\">\r\n\t\t\t\t\t<a class=\"navbar-brand\" href=\"/home\"><span class=\"fa fa-bell-o\"></span> Tmall</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"footer-grid\">\r\n\t\t\t\t\t<div class=\"w3l-copyright text-center\">\r\n\t\t\t\t\t\t<div class=\"social text-center\">\r\n\t\t\t\t\t\t\t<ul class=\"d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"facebook\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-facebook-f\"></span></a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"twitter\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-twitter\"></span></a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"rss\"><span class=\"fas fa-rss\"></span></a>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"linkedin\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-linkedin-in\"></span></a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"google\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-google-plus\"></span></a></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p class=\"mt-4\">© 2022 Tmall. All Rights Reserved | Design by <a href=\"http://w3layouts.com/\"\r\n\t\t\t\t\t\t\t\ttarget=\"=_blank\"> Charon.Wang\r\n\t\t\t\t\t\t\t</a></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t\t<!-- footer -->\r\n\r\n\t\t<!-- move top -->\r\n\t\t<button type=\"button\" @click=\"topFunction\" id=\"movetop\" title=\"Go to top\">\r\n\t\t\t&#10548;\r\n\t\t</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'itemDetailPage',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\titemId: \"\",\r\n\t\t\t\titemDetail: {},\r\n\t\t\t\titemParams: {},\r\n\t\t\t\titemList: [],\r\n\t\t\t\tpageNum: 1,\r\n\t\t\t\tpageSize: 6,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.itemId = this.$route.query.itemId;\r\n\t\t\tthis.getItemById();\r\n\t\t\tthis.getItemsParamById();\r\n\t\t\tthis.getOtherItems();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//当用户单击按钮时，滚动到文档顶部\r\n\t\t\ttopFunction() {\r\n\t\t\t\tdocument.body.scrollTop = 0;\r\n\t\t\t\tdocument.documentElement.scrollTop = 0;\r\n\t\t\t},\r\n\t\t\t// 将数据库查询操作封装\r\n\t\t\tgetItemById() {\r\n\t\t\t\tthis.request.get(\"/items/\" + this.itemId)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tthis.itemDetail = res.data;\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetItemsParamById() {\r\n\t\t\t\tthis.request.get(\"/items-param/itemParams\", {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\titemId: this.itemId\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthis.itemParams = res.data;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetOtherItems(){\r\n\t\t\t\tthis.request.get(\"/items/page\", {\r\n\t\t\t\t\tparams: {\r\n\t\t\t\t\t\tpageNum: this.pageNum,\r\n\t\t\t\t\t\tpageSize: this.pageSize\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tif (res.data.total >= 1) {\r\n\t\t\t\t\t\tthis.itemList = res.data.records;\r\n\t\t\t\t\t} else if (res.data.total == 0) {\r\n\t\t\t\t\t\tthis.$message(\"没有找到噢！\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchangeItemId(id) {\r\n\t\t\t\t// this.itemId = id;\r\n\t\t\t\t// this.getItemById();\r\n\t\t\t\t// this.getItemsParamById();\r\n\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\tpath: \"/detail\",\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\titemId: id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.$router.go(0);\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t\tthis.pageSize = val;\r\n\t\t\t\tthis.load();\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.pageNum = val;\r\n\t\t\t\tthis.load();\r\n\t\t\t},\r\n\t\t\thandlePageChangePrev() {\r\n\t\t\t\tthis.pageNum--;\r\n\t\t\t\tconsole.log(this.pageNum);\r\n\t\t\t\tthis.load();\r\n\t\t\t},\r\n\t\t\thandlePageChangeNext() {\r\n\t\t\t\tthis.pageNum++;\r\n\t\t\t\tconsole.log(this.pageNum);\r\n\t\t\t\tthis.load();\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\t// 当用户从文档顶部向下滚动20px时，显示按钮\r\n\twindow.onscroll = function() {\r\n\t\tscrollFunction()\r\n\t};\r\n\r\n\t//滚动一定距离显示按钮\r\n\tfunction scrollFunction() {\r\n\t\tif (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\r\n\t\t\tdocument.getElementById(\"movetop\").style.display = \"block\";\r\n\t\t} else {\r\n\t\t\tdocument.getElementById(\"movetop\").style.display = \"none\";\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import '../assets/css/style-starter.css';\r\n\t@import '../assets/css/index-google-fonts.css';\r\n\t@import '../assets/css/itemStyle.css';\r\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}