{"ast":null,"code":"export default {\n  name: 'shopcartPage',\n  data() {\n    return {\n      userInf: {},\n      tableData: [],\n      pageNum: 1,\n      pageSize: 5,\n      num: 1\n    };\n  },\n  created() {\n    this.load();\n    this.getUserInf();\n  },\n  methods: {\n    deleteRow(scope, rows) {\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        console.log(scope);\n        this.request.delete(\"/shopcart/delete/\" + scope.row.id).then(res => {\n          if (res) {\n            this.$message.success(\"删除成功!\");\n            // rows.splice(scope.$index, 1);\n            this.load();\n          } else {\n            this.$message.error(\"删除失败!\");\n          }\n        }).catch(err => {\n          console.log(err);\n          this.$message.error(\"删除失败!\");\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    //获取用户信息\n    getUserInf() {\n      var str = localStorage.getItem(\"user\");\n      this.userInf = JSON.parse(str);\n    },\n    //load\n    load() {\n      this.request.get(\"/shopcart/findAll\").then(res => {\n        this.tableData = res.data.records;\n        console.log(this.tableData);\n      });\n    },\n    //退出登录\n    logout() {\n      this.$store.commit(\"logout\");\n      this.$message.success(\"退出成功\");\n    },\n    //当用户单击按钮时，滚动到文档顶部\n    topFunction() {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n    }\n  }\n};\n\n// 当用户从文档顶部向下滚动20px时，显示按钮\nwindow.onscroll = function () {\n  scrollFunction();\n};\nfunction scrollFunction() {\n  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\n    document.getElementById(\"movetop\").style.display = \"block\";\n  } else {\n    document.getElementById(\"movetop\").style.display = \"none\";\n  }\n}\n//","map":{"version":3,"mappings":"AA8HA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;IAEA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACAC;MACA;QACAC;QACAC;QACAC;MACA;QACAC;QACA;UACA;YACA;YACA;YACA;UACA;YACA;UACA;QACA;UACAA;UACA;QACA;MACA;QACA;UACAD;UACAE;QACA;MACA;IAEA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MACA;QACA;QACAH;MACA;IACA;IACA;IACAI;MACA;MACA;IACA;IACA;IACAC;MACAC;MACAA;IACA;IACAC;MACA;IACA;EACA;AACA;;AAEA;AACAC;EACAC;AACA;AAEA;EACA;IACAH;EACA;IACAA;EACA;AACA;AACA","names":["name","data","userInf","tableData","pageNum","pageSize","num","created","methods","deleteRow","confirmButtonText","cancelButtonText","type","console","message","getUserInf","load","logout","topFunction","document","handleSelectionChange","window","scrollFunction"],"sourceRoot":"src/views","sources":["shopcartPage.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--header-->\r\n\t\t<header id=\"site-header\" class=\"fixed-top\">\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<nav class=\"navbar navbar-expand-lg stroke p-0\">\r\n\t\t\t\t\t<!-- logo -->\r\n\t\t\t\t\t<h1>\r\n\t\t\t\t\t\t<a class=\"navbar-brand\" href=\"/home\">\r\n\t\t\t\t\t\t\t<img src=\"../assets/images/logo.png\" alt=\"logo\" title=\"logo\" style=\"height:45px;\" /> Tmall\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</h1>\r\n\r\n\t\t\t\t\t<div class=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\r\n\t\t\t\t\t\t<ul class=\"navbar-nav ml-lg-5 mr-lg-auto\">\r\n\t\t\t\t\t\t\t<li class=\"nav-item @@home__active\">\r\n\t\t\t\t\t\t\t\t<a class=\"nav-link\" href=\"/home\">Home <span class=\"sr-only\">(current)</span></a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li class=\"nav-item active\">\r\n\t\t\t\t\t\t\t\t<a class=\"nav-link\" href=\"/about\">About</a>\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t\t<!-- 头像 -->\r\n\t\t\t\t\t\t<el-dropdown>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<el-avatar :src=\"userInf.avatar\"></el-avatar>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<el-dropdown-menu slot=\"dropdown\" style=\"width: 100px; text-align: center\">\r\n\t\t\t\t\t\t\t\t<el-dropdown-item style=\"font-size: 14px; padding: 5px 0\">\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/person\">\r\n\t\t\t\t\t\t\t\t\t\t个人信息\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item style=\"font-size: 14px; padding: 5px 0\">\r\n\t\t\t\t\t\t\t\t\t<router-link to=\"/shopcart\">\r\n\t\t\t\t\t\t\t\t\t\t购物车\r\n\t\t\t\t\t\t\t\t\t</router-link>\r\n\t\t\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t\t\t<el-dropdown-item style=\"font-size: 14px; padding: 5px 0\">\r\n\t\t\t\t\t\t\t\t\t<span @click=\"logout\">\r\n\t\t\t\t\t\t\t\t\t\t退出登录\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</el-dropdown-item>\r\n\t\t\t\t\t\t\t</el-dropdown-menu>\r\n\t\t\t\t\t\t</el-dropdown>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</nav>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t\t<!--/header-->\r\n\r\n\t\t<!-- 购物车 -->\r\n\t\t<div class=\"box\">\r\n\t\t\t<el-table :data=\"tableData\" tooltip-effect=\"dark\" border stripe @selection-change=\"handleSelectionChange\"\r\n\t\t\t\tmax-height=\"600px\">\r\n\t\t\t\t<el-table-column type=\"selection\" width=\"40\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"商品\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<img :src=\"scope.row.itemImgUrl\" style=\"width: 100px; height: 100px; float: left;\" />\r\n\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\tstyle=\"float: left; margin-top: 40px; margin-left: 20px; font-size: 20px;\">{{scope.row.itemName}}</a>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"单价(元)\" width=\"90\" style=\"text-align: center;\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<a style=\"font-size: 16px;\">{{scope.row.itemPrice}}</a>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"数量\" width=\"225\" show-overflow-tooltip>\r\n\t\t\t\t\t<el-input-number size=\"medium\" v-model=\"num\" :min=\"0\"></el-input-number>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"总价(元)\" width=\"120\" show-overflow-tooltip>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column fixed=\"right\" label=\"操作\" width=\"60\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button @click=\"deleteRow(scope, tableData)\" type=\"text\" size=\"small\">\r\n\t\t\t\t\t\t\t移除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t</div>\r\n\t\t<!-- //购物车 -->\r\n\r\n\t\t<!-- footer -->\r\n\t\t<footer class=\"py-5\">\r\n\t\t\t<div class=\"container pt-md-5\">\r\n\t\t\t\t<div class=\"footer-logo mb-lg-5 mb-4 text-center\">\r\n\t\t\t\t\t<a class=\"navbar-brand\" href=\"/home\"><span class=\"fa fa-bell-o\"></span> Tmall</a>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"footer-grid\">\r\n\t\t\t\t\t<div class=\"w3l-copyright text-center\">\r\n\t\t\t\t\t\t<div class=\"social text-center\">\r\n\t\t\t\t\t\t\t<ul class=\"d-flex justify-content-center\">\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"facebook\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-facebook-f\"></span></a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"twitter\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-twitter\"></span></a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"rss\"><span class=\"fas fa-rss\"></span></a>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"linkedin\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-linkedin-in\"></span></a></li>\r\n\t\t\t\t\t\t\t\t<li class=\"mx-md-2 mx-1\"><a href=\"#url\" class=\"google\"><span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"fab fa-google-plus\"></span></a></li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p class=\"mt-4\">© 2022 Tmall. All Rights Reserved | Design by <a href=\"http://w3layouts.com/\"\r\n\t\t\t\t\t\t\t\ttarget=\"=_blank\"> Charon.Wang\r\n\t\t\t\t\t\t\t</a></p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t\t<!-- footer -->\r\n\r\n\t\t<!-- move top -->\r\n\t\t<button type=\"button\" @click=\"topFunction\" id=\"movetop\" title=\"Go to top\">\r\n\t\t\t&#10548;\r\n\t\t</button>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'shopcartPage',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuserInf: {},\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tpageNum: 1,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t\tnum: 1,\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.load();\r\n\t\t\tthis.getUserInf();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tdeleteRow(scope, rows) {\r\n\t\t\t\tthis.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tconsole.log(scope);\r\n\t\t\t\t\tthis.request.delete(\"/shopcart/delete/\" + scope.row.id).then(res => {\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\tthis.$message.success(\"删除成功!\");\r\n\t\t\t\t\t\t\t// rows.splice(scope.$index, 1);\r\n\t\t\t\t\t\t\tthis.load();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(\"删除失败!\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.$message.error(\"删除失败!\");\r\n\t\t\t\t\t})\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '已取消删除'\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\t//获取用户信息\r\n\t\t\tgetUserInf() {\r\n\t\t\t\tvar str = localStorage.getItem(\"user\");\r\n\t\t\t\tthis.userInf = JSON.parse(str);\r\n\t\t\t},\r\n\t\t\t//load\r\n\t\t\tload() {\r\n\t\t\t\tthis.request.get(\"/shopcart/findAll\").then(res => {\r\n\t\t\t\t\tthis.tableData = res.data.records;\r\n\t\t\t\t\tconsole.log(this.tableData);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//退出登录\r\n\t\t\tlogout() {\r\n\t\t\t\tthis.$store.commit(\"logout\")\r\n\t\t\t\tthis.$message.success(\"退出成功\")\r\n\t\t\t},\r\n\t\t\t//当用户单击按钮时，滚动到文档顶部\r\n\t\t\ttopFunction() {\r\n\t\t\t\tdocument.body.scrollTop = 0;\r\n\t\t\t\tdocument.documentElement.scrollTop = 0;\r\n\t\t\t},\r\n\t\t\thandleSelectionChange(val) {\r\n\t\t\t\tthis.multipleSelection = val\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\t// 当用户从文档顶部向下滚动20px时，显示按钮\r\n\twindow.onscroll = function() {\r\n\t\tscrollFunction()\r\n\t};\r\n\r\n\tfunction scrollFunction() {\r\n\t\tif (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {\r\n\t\t\tdocument.getElementById(\"movetop\").style.display = \"block\";\r\n\t\t} else {\r\n\t\t\tdocument.getElementById(\"movetop\").style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\t//\r\n</script>\r\n\r\n<style>\r\n\t@import '../assets/css/style-starter.css';\r\n\t@import '../assets/css/index-google-fonts.css';\r\n\t@import '../assets/css/itemStyle.css';\r\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}